<link rel="stylesheet" href="../styles/default.css">
<link rel="icon" type="image/x-icon" href="../res/favicon.png">
<title>9client - Sign Up</title>

<head>
    <div id="topbar"><img src="../res/logo.png" alt="9client Logo"></div>
    <div id="bg"></div>
</head>

<body>
    <div id="middlebox" style="max-width: 500px; max-height: 500px; padding-top: 100px;">
        <h1 style="left: 50%; transform: translateX(-50%); text-align: center;">
            Sign Up
        </h1>

        <div id="textform">
            <a id="userlabel">Username</a>
            <br>
            <input type="text" name="username" id="usernamefield" required>
        </div>

        <br>

        <div id="textform">
            <a id="pwordlabel">Password</a>
            <br>
            <input type="password" name="password" id="pwordfield" required>
        </div>

        <br>

        <div id="textform">
            <a id="vpwordlabel">Verify Password</a>
            <br>
            <input type="password" name="vpassword" id="vpwordfield" required>
        </div>

        <br>
        <button onclick=updatevalid() id="submit" value="Submit" style="margin-bottom: 10px; padding: 8px 15px 8px 15px;">
            Submit
        </button>
        <br>
        <a>Have an account? </a><a href="../login/index.html">Log in.</a>
    </div>
</body>

<script>
    var taken_names = {
        "9client": true,
    }

    var req_field = "Required field"
    var err_style = "color: rgb(255,75,75);"

    let userlabel = document.getElementById("userlabel")
    let pwordlabel = document.getElementById("pwordlabel")
    let vpwordlabel = document.getElementById("vpwordlabel")

    let usernamefield = document.getElementById("usernamefield")
    let pwordfield = document.getElementById("pwordfield")
    let vpwordfield = document.getElementById("vpwordfield")

    function updatevalid() {

        var username_valid = false
        var pword_valid = false
        var vpword_valid = false

        if (usernamefield.value) {
            if (taken_names[usernamefield.value]) {
                userlabel.style = err_style
                userlabel.innerText = "Username is taken"
            } else {
                if (usernamefield.value.length > 2) {
                    userlabel.style = "color: whitesmoke;"
                    userlabel.innerText = "Username"
                    username_valid = true
                } else {
                    userlabel.style = err_style
                    userlabel.innerText = "Username must be at least 3 characters"
                };
            };
        } else {
            userlabel.style = err_style
            userlabel.innerText = req_field
        };

        if (pwordfield.value) {
            if (pwordfield.value.length > 7) {
                pwordlabel.style = "color: whitesmoke;"
                pwordlabel.innerText = "Password"
                pword_valid = true
            } else {
                pwordlabel.style = err_style
                pwordlabel.innerText = "Password must be at least 8 characters"
            };
        } else {
            pwordlabel.style = err_style
            pwordlabel.innerText = req_field
        };

        if (vpwordfield.value) {
            if (vpwordfield.value == pwordfield.value) {
                vpwordlabel.style = "color: whitesmoke;"
                vpwordlabel.innerText = "Verify Password"
                vpword_valid = true
            } else {
                vpwordlabel.style = err_style
                vpwordlabel.innerText = "Must match password"
            };
        } else {
            vpwordlabel.style = err_style
            vpwordlabel.innerText = req_field

        };

        if (username_valid & pword_valid & vpword_valid) {
            return true
        }

    }
</script>